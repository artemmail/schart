@page
@model StockChart.Pages.Payments.UsersTableModel

@using Kendo.Mvc.Extensions;
@using Kendo.Mvc.Infrastructure;
@using Kendo.Mvc.UI;
@using StockChart.Model.Payments;

@{
    //Layout = "_LayoutReport";
    ViewData["Title"] = "Таблица пользователей";
}

<link href="/Content/main.css" rel="stylesheet" type="text/css" />
<link href="/Content/component-new-menu.css" rel="stylesheet" type="text/css" />
<link href="/Content/common.css" rel="stylesheet" type="text/css" />
<link href="/Content/index.css" rel="stylesheet" type="text/css" />
<div class="leftsidebar">
    <partial name="LeftMenu" />
</div>

<div class="widerightsidebar">
    <div class="blogblock">

        @(Html.Kendo().Grid<StockChart.Model.Payments.ApplicationUserModel>()
            .Name("Grid")
            .Columns(columns =>
            {
                columns.Bound(o => o.Id).Hidden();
                columns.Bound(o => o.UserName);//.Editable(editable => 1==2);
                columns.Bound(o => o.Email);//.Editable(editable => false);
                columns.Bound(o => o.EmailConfirmed);//.Editable(editable => false);
                columns.Bound(o => o.RegistrationDate).Width(180).Format("{0: dd.MM.yyyy HH:mm:ss}");
                columns.Command(command => command.Destroy()).Width(150);
            })
          /* .ToolBar(toolbar =>
            {
                //    toolbar.Create();
                toolbar.Save();
            })*/
            .Pageable()
            .Events(e => e.Edit("onEdit"))
            //
            .Sortable()
            .Filterable()
            .Scrollable()
            .HtmlAttributes(new { style = "height:750px;" })
        //    .Editable(editable => editable.Mode(GridEditMode.InCell))
            .DataSource(dataSource => dataSource
            .Ajax()
            .Batch(true)
            .Model(model =>
            {
                model.Id(p => p.Id);
                //model.Field(p => p.Email).Editable(false);
               // model.Field(p => p.Service).DefaultValue(1);
            })
            .ServerOperation(false)
            .Read(read => read.Action("Read", "Users"))
            .Destroy(read => read.Action("Destroy", "Users"))
            //     .Update(read => read.Action("Update", "Users"))
            ///   .Create(read => read.Action("Create", "Users"))
            .PageSize(28)
            )
            )
    </div>
</div>

<script>
    function onEdit(e) {
        if (e.model.isNew()) {
            //      alert(e.model);
        }
    }
</script>


